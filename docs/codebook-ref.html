<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Codebook reference - Lace Documentation</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />
        <script src="https://cdn.plot.ly/plotly-2.18.0.min.js"></script>
        <style>
            .plotly-graph-div {
                aspect-ratio: 1 / 1;
            }
        </style>

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="./theme/catppuccin.css">
        <link rel="stylesheet" href="./theme/catppuccin-highlight.css">

        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="install.html"><strong aria-hidden="true">2.</strong> Installation</a></li><li class="chapter-item expanded "><a href="workflow/workflow.html"><strong aria-hidden="true">3.</strong> The lace workflow</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="workflow/codebook.html"><strong aria-hidden="true">3.1.</strong> Create and edit a codebook</a></li><li class="chapter-item expanded "><a href="workflow/model.html"><strong aria-hidden="true">3.2.</strong> Run/train/fit a model</a></li><li class="chapter-item expanded "><a href="workflow/analysis.html"><strong aria-hidden="true">3.3.</strong> Conduct an analysis</a></li></ol></li><li class="chapter-item expanded "><a href="pcc/pcc.html"><strong aria-hidden="true">4.</strong> Probabilistic Cross-Categorization</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="pcc/depprob.html"><strong aria-hidden="true">4.1.</strong> Dependence Probability</a></li><li class="chapter-item expanded "><a href="pcc/mi.html"><strong aria-hidden="true">4.2.</strong> Mutual Information</a></li><li class="chapter-item expanded "><a href="pcc/rowsim.html"><strong aria-hidden="true">4.3.</strong> Row similarity</a></li><li class="chapter-item expanded "><a href="pcc/pred.html"><strong aria-hidden="true">4.4.</strong> Prediction & Imputation</a></li><li class="chapter-item expanded "><a href="pcc/surp.html"><strong aria-hidden="true">4.5.</strong> Surprisal</a></li><li class="chapter-item expanded "><a href="pcc/simulate.html"><strong aria-hidden="true">4.6.</strong> Data Simulation</a></li><li class="chapter-item expanded "><a href="pcc/inouttable.html"><strong aria-hidden="true">4.7.</strong> In- and out-of-table operations</a></li></ol></li><li class="chapter-item expanded "><a href="data/basics.html"><strong aria-hidden="true">5.</strong> Preparing your data</a></li><li class="chapter-item expanded "><a href="codebook-ref.html" class="active"><strong aria-hidden="true">6.</strong> Codebook reference</a></li><li class="chapter-item expanded "><a href="appendix/appendix.html"><strong aria-hidden="true">7.</strong> Appendix</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="appendix/stats-primer.html"><strong aria-hidden="true">7.1.</strong> Stats primer</a></li><li class="chapter-item expanded "><a href="appendix/glossary.html"><strong aria-hidden="true">7.2.</strong> Glossary</a></li><li class="chapter-item expanded "><a href="appendix/references.html"><strong aria-hidden="true">7.3.</strong> Refernces</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="latte">Latte</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="frappe">Frapp√©</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="macchiato">Macchiato</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mocha">Mocha</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Lace Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/promised-ai/braid2lace" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="codebook-reference"><a class="header" href="#codebook-reference">Codebook reference</a></h1>
<p>The codebook is how you tell Lace about your data. The codebook contains
information about</p>
<ul>
<li>Row names</li>
<li>Column names</li>
<li>The type of data in each column (e.g., continuous, categorical, or count)</li>
<li>The prior on the parameters for each column</li>
<li>The hyperprior on the prior parameters for each column</li>
<li>The prior on the Dirichlet Process alpha parameter</li>
</ul>
<h2 id="codebook-fields"><a class="header" href="#codebook-fields">Codebook fields</a></h2>
<h3 id="table_name"><a class="header" href="#table_name"><code>table_name</code></a></h3>
<p>String name of the table. For your reference.</p>
<h3 id="state_alpha_prior"><a class="header" href="#state_alpha_prior"><code>state_alpha_prior</code></a></h3>
<p>A gamma prior on the Chinese Restaurant Process (CRP) alpha parameter assigning
columns to views.</p>
<p>Example with a gamma prior</p>
<pre><code class="language-yaml">state_alpha_prior:
  Gamma:
    shape: 1.0
    rate: 1.0
</code></pre>
<h3 id="view_alpha_prior"><a class="header" href="#view_alpha_prior"><code>view_alpha_prior</code></a></h3>
<p>A gamma prior on the Chinese Restaurant Process (CRP) alpha parameter assigning
rows within views to categories.</p>
<p>Example with a gamma prior</p>
<pre><code class="language-yaml">view_alpha_prior:
  Gamma:
    shape: 1.0
    rate: 1.0
</code></pre>
<h3 id="col_metadata"><a class="header" href="#col_metadata"><code>col_metadata</code></a></h3>
<p>A list of columns, ordered by left-to-right occurrence in the data. Contains
the following fields:</p>
<ul>
<li><code>name</code>: The name of the column</li>
<li><code>notes</code>: Optional information about the column. Purely for reference</li>
<li><code>coltype</code>: Contains information about the type type of data, the prior, and
the hyper prior. See <a href="/basics/codebook#column-metadata">column metadata for more
information</a></li>
<li><code>missing_not_at_random</code>: a boolean. If <code>false</code> (default), missing values in
the column are assumed to be missing completely at random.</li>
</ul>
<h3 id="row_names"><a class="header" href="#row_names"><code>row_names</code></a></h3>
<p>A list of row names in order of top-to-bottom occurrence in the data</p>
<h3 id="notes"><a class="header" href="#notes"><code>notes</code></a></h3>
<p>Optional notes for user reference</p>
<h2 id="codebook-type-inference"><a class="header" href="#codebook-type-inference">Codebook type inference</a></h2>
<p>When you upload your data, Lace will pull the row and column names from the
file, infer the data types, and choose and empirical hyperprior from the data.</p>
<p>Type inference works like this:</p>
<ul>
<li>Categorical if:
<ul>
<li>The column contains only string values
<ul>
<li>Lace will assume the categorical variable can take on any of (and
only) the existing values in the column</li>
</ul>
</li>
<li>There are only integers up to a cutoff.
<ul>
<li>If There are only integers in the column <code>x</code> the categorical values
will be assumed to take on values 0 to <code>max(x)</code>.</li>
</ul>
</li>
</ul>
</li>
<li>Count if:
<ul>
<li>There are only integers that exceed the value of the cutoff</li>
</ul>
</li>
<li>Continuous if:
<ul>
<li>There are only integers and one or more floats</li>
</ul>
</li>
</ul>
<h2 id="column-metadata"><a class="header" href="#column-metadata">Column metadata</a></h2>
<ul>
<li>Either <code>prior</code> or <code>hyper</code> must be defined.
<ul>
<li>If <code>prior</code> is defined and <code>hyper</code> is not defined, hyperpriors and
hyperparameter inference will be disabled.</li>
</ul>
</li>
</ul>
<p class=warning>
It is best to leave the hyperpriors alone. It is difficult to intuit what
effect the hyperpriors have on the final distribution. If you have knowledge
beyond the vague hyperpriors, null out the `hyper` field with a `~` and set the
prior instead. This will disable hyperparameter inference inf favor of the
expert knowledge you have provided.
</p>
<h3 id="continuous"><a class="header" href="#continuous">Continuous</a></h3>
<p>The continuous type has the <code>hyper</code> field and the <code>prior</code> field. The prior
parameters are those for the Normal Inverse Chi-squared prior on the mean and
variance of a normal distribution.</p>
<ul>
<li><code>m</code>: the prior mean</li>
<li><code>k</code>: how strongly (in pseudo observations) that we believe <code>m</code></li>
<li><code>s2</code>: the prior variance</li>
<li><code>v</code>: how strongly (is pseudo observations) that we believe <code>s2</code></li>
</ul>
<p>To have widely dispersed components with small variances you would set <code>k</code> very
low and very high.</p>
<p>FIXME: Animation showing effect of different priors</p>
<p>The hyper priors are the priors on the above parameters. They are named for the
parameters to which they are attached, e.g. <code>pr_m</code> is the hyper prior for the
<code>m</code> parameter.</p>
<ul>
<li><code>pr_m</code>: Normal distribution</li>
<li><code>pr_k</code>: Gamma distribution with shape and rate (inverse scale) parameters</li>
<li><code>pr_v</code>: Inverse gamma distribution with shape and scale parameters</li>
<li><code>pr_s2</code>: Inverse gamma distribution with shape and scale parameters</li>
</ul>
<pre><code class="language-yaml">- name: Eccentricity
  coltype:
    Continuous:
      hyper:
        pr_m:
          mu: 0.02465318142734303
          sigma: 0.1262297091840037
        pr_k:
          shape: 1.0
          rate: 1.0
        pr_v:
          shape: 7.0587581525186648
          scale: 7.0587581525186648
        pr_s2:
          shape: 7.0587581525186648
          scale: 0.015933939480678149
      prior:
        m: 0.0
        k: 1.0
        s2: 7.0
        v: 1.0
      # To not define the prior add a `~`
      # prior: ~
  notes: ~
  missing_not_at_random: false
</code></pre>
<h3 id="categorical"><a class="header" href="#categorical">Categorical</a></h3>
<p>In addition to <code>prior</code> and <code>hyper</code>, Categorical has additional special fields:</p>
<ul>
<li><code>k</code>: the number of values the variable can assume</li>
<li><code>value_map</code>: An optional map of integers in [0, ..., k-1] mapping the integer
code (how the value is represented internally) to the string value. If
<code>value_map</code> is not defined, it is usually assume that classes take on only
integer values in [0, ..., k-1].</li>
</ul>
<p>The <code>hyper</code> is an inverse gamma prior on the prior parameter <code>alpha</code></p>
<pre><code class="language-yaml">- name: Class_of_Orbit
  coltype:
    Categorical:
      k: 4
      hyper:
        pr_alpha:
          shape: 1.0
          scale: 1.0
      value_map:
        0: Elliptical
        1: GEO
        2: LEO
        3: MEO
      prior:
        alpha: 0.5
      # To not define the prior add a `~`
      # prior: ~
  notes: ~
  missing_not_at_random: false
</code></pre>
<h2 id="editing-the-codebook"><a class="header" href="#editing-the-codebook">Editing the codebook</a></h2>
<p>You should use the default codebook generated by the Lace CLI as a starting
point for custom edits. Generally the only edits you will make are</p>
<ul>
<li>Adding notes/comments</li>
<li>changing the <code>state_alpha_prior</code> and <code>view_alpha_prior</code> (though you should
only do this if you know what you're doing)</li>
<li>converting a <code>Count</code> column to a <code>Categorical</code> column. Usually there will be
no need to change between other column types.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="data/basics.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="appendix/appendix.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="data/basics.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="appendix/appendix.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
